<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>剑指offer-20.正则表达式匹配</title>
  <script>
    //测试用例
    s1 = "aaa";
    p1 = "a.a";
    p2 = "ab*ac*a";
    p3 = "aa.a";
    p4 = "ab*a";

    s2 = 'aa';
    p5 = 'a*'

    // console.log(match(s1, p1));
    // console.log(match(s1, p2));
    // console.log(match(s1, p3));
    // console.log(match(s1, p4));
    console.log(match(s2, p5));


    //解法：
    function match(s, p) {
      if (s == null || p == null)
        return false;
      let sIndex = 0,
        pIndex = 0;
      return matchCore(s, sIndex, p, pIndex);
    }

    function matchCore(s, sIndex, p, pIndex) {
      if (sIndex === s.length && pIndex === p.length)
        return true;
      if (sIndex !== s.length && pIndex === p.length)
        //sIndex==s.length&&pIndex!=p.length 也有可能true，比如s="aaa" p="aaab*"
        return false;
      if ((pIndex + 1 < p.length) && (p[pIndex + 1] === '*')) {
        if ((sIndex < s.length) && ((p[pIndex] === s[sIndex]) || (p[pIndex] === '.')))
          return matchCore(s, sIndex, p, pIndex + 2) ||
            matchCore(s, sIndex + 1, p, pIndex +
              2) || matchCore(s, sIndex + 1, p, pIndex);
        else
          return matchCore(s, sIndex, p, pIndex + 2);
      }
      if ((sIndex < s.length) && ((p[pIndex] === s[sIndex]) || (p[pIndex] === '.')))
        return matchCore(s, sIndex + 1, p, pIndex + 1);
      else
        return false;
    }
  </script>
</head>

<body>
  <!-- 
     题目描述：
    请实现一个函数用来匹配包括'.'和'*'的正则表达式。模式中的字符'.'表示任意一个字符，而'*'表示它前面的字符可以出现任意次（包含0次）。 
    在本题中，匹配是指字符串的所有字符匹配整个模式。例如，字符串"aaa"与模式"a.a"和"ab*ac*a"匹配，但是与"aa.a"和"ab*a"均不匹配

     
     -->
</body>

</html>