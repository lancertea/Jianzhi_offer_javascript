<!-- author:lancer
     date:2019/12/20 -->

     <!DOCTYPE html>
     <html>
     <head>
     <meta charset="utf-8">
     <title>剑指offer-25.复杂链表的复制</title>
     <script>


function RandomListNode(x){
    this.val = x;
    this.next = null;
    this.random = null;
}

//测试用例
let List1 = new RandomListNode('A'); 
let a1 = new RandomListNode('B');
List1.next = a1;
let b1 = new RandomListNode('C');
a1.next = b1;
let c1 = new RandomListNode('D'); 
b1.next = c1; 
let d1 = new RandomListNode('E'); 
c1.next = d1; 
List1.random=b1;
a1.random=d1;
c1.random=a1;
console.log(Clone(List1));
console.log(Clone1(List1));

//参考代码
//解法一
//时间复杂度：O(n)
//空间复杂度：O(1)
function Clone(head)
{
if(!head){
  return head;
}
let cur = head;
while(cur){
  cur.next = new RandomListNode(cur.val,cur.next);
  cur = cur.next.next;
}
cur = head;
while(cur){
  if(cur.random){
    cur.next.random = cur.random.next;
  }
  cur = cur.next.next;
}
cur = head;
let res = cur.next, node = res;
while(cur.next && node.next){
  cur.next = cur.next.next;
  node.next = node.next.next;
  cur = cur.next;
  node = node.next;
}
cur.next = null;
return res;
}

//解法二
// 使用map记录新节点
//时间复杂度：O(n)
//空间复杂度：O(n)
function Clone1(head)
{
 if(!head){
   return head;
 }
 let cur = head, 
     m = new Map();
  while(cur){
    m.set(cur,new RandomListNode(cur.val));
    cur = cur.next;
  }
  cur = head;
  while(cur){
    m.get(cur).next = m.get(cur.next) === undefined ? null : m.get(cur.next);
    m.get(cur).random = m.get(cur.random);
    cur = cur.next;
  }
  return m.get(head);
}



     </script>
     </head>
     
     <body>
     <!-- 
     题目描述：
   输入一个复杂链表（每个节点中有节点值，以及两个指针，一个指向下一个节点，另一个特殊指针指向任意一个节点），返回结果为复制后复杂链表的head。
   （注意，输出结果中请不要返回参数中的节点引用，否则判题程序会直接返回空
     
     
     
     -->
     </body> 
     
     </html>