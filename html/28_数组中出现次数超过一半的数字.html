<!-- author:lancer
     date:2020/01/07 -->

     <!DOCTYPE html>
     <html>
     <head>
     <meta charset="utf-8">
     <title>剑指offer-28.数组中出现次数超过一半的数字</title>
     <script>




//测试用例：
let a =[1,2,3,2,2,2,5,4,2];
let b =[1];
let c=[1,2,3,2,4,2,5,2,3];


console.log(MoreThanHalfNum_Solution(a));
console.log(MoreThanHalfNum_Solution(b));
console.log(MoreThanHalfNum_Solution(c));
console.log(MoreThanHalfNum_Solution1(a));
console.log(MoreThanHalfNum_Solution1(b));
console.log(MoreThanHalfNum_Solution1(c));
console.log(MoreThanHalfNum_Solution2(a));
console.log(MoreThanHalfNum_Solution2(b));
console.log(MoreThanHalfNum_Solution2(c));

//参考代码
//解法1：常规做法
function MoreThanHalfNum_Solution(numbers)
{
  if(!numbers||numbers.length==0)
  return 0;
  if(numbers.length==1)
  return numbers[0];
  let arr=numbers.sort(sortnumber);
  let count=0;
  for(let i=0;i<arr.length-1;i++)
  {  
    if(arr[i]==arr[i+1]) //arr[i]==arr[arr.length/2]
   {count++;
    if(count>parseInt(numbers.length/2))
    return arr[i];
   }
    else count=1;
  }
  return 0;
}

function sortnumber(a,b)
{
    return a-b;
}


//解法2 基于数组的特点
function MoreThanHalfNum_Solution1(numbers)
{
  if(!numbers||numbers.length==0)
  return false;
  if(numbers.length==1)
  return numbers[0];
  let result = numbers[0];
  let count = 1;
  for(let i=1;i<numbers.length;i++)
  {
      if(count==0)
      {
          result=numbers[i];
          count=1;
      }
      else if(numbers[i]==result)
      count++;
      else
      count--;
  }
  let times =0;
  for(let i=0; i<numbers.length;i++)
  {
    if(numbers[i]==result)
    times++;
  }
  return times>parseInt(numbers.length/2)?result:0;
}

//解法3：哈希
function MoreThanHalfNum_Solution2(numbers)
{
if(!numbers||numbers.length===0)
    return 0;
if(numbers.length===1)
   return numbers[0];
let m=new Map();
    for(let i=0;i<numbers.length;i++){
        if(m.has(numbers[i])){
        let temp=m.get(numbers[i]);
        m.set(numbers[i],++temp);
        if(temp>(numbers.length>>1))
        return numbers[i]; 
        }
        else{
        m.set(numbers[i],1);
        }
    }
    return 0;
}

     </script>
     </head>
     
     <body>
     <!-- 
     题目描述：
   数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。例如输入一个长度为9的数组{1,2,3,2,2,2,5,4,2}。
   由于数字2在数组中出现了5次，超过数组长度的一半，因此输出2。如果不存在则输出0。
     
     
     -->
     </body> 
     
     </html>